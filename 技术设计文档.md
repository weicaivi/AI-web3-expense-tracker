# æŠ€æœ¯è®¾è®¡æ–‡æ¡£ï¼šAI Web3è®°è´¦ Hackathon Demo

## 1. é¡¹ç›®æ¦‚è§ˆ

### 1.1 Demoç›®æ ‡
åœ¨1-2å‘¨å†…å®Œæˆä¸€ä¸ªå¯æ¼”ç¤ºçš„åŸå‹ï¼Œå±•ç¤º**AIæ™ºèƒ½è®°è´¦ + Web3æ•°æ®ä¸»æƒ**çš„æ ¸å¿ƒæ¦‚å¿µã€‚

### 1.2 æ ¸å¿ƒæ¼”ç¤ºç‚¹ï¼ˆå·²å®ç°ï¼‰
- âœ… AIè‡ªç„¶è¯­è¨€è®°è´¦ï¼š"ä»Šå¤©åƒé¥­30å—" â†’ è‡ªåŠ¨è§£æï¼ˆé€šä¹‰åƒé—®ï¼‰
- âœ… OCRå›¾ç‰‡è¯†åˆ«ï¼šæ‹å°ç¥¨ â†’ è‡ªåŠ¨è¯†åˆ«é‡‘é¢åˆ†ç±»ï¼ˆé€šä¹‰åƒé—®VLï¼‰
- âœ… æ•°æ®åŠ å¯†å­˜å‚¨åˆ°Pinata IPFSï¼ˆå»ä¸­å¿ƒåŒ– + ç«¯åˆ°ç«¯åŠ å¯†ï¼‰
- âœ… é’±åŒ…è¿æ¥ï¼ˆRainbowKit + MetaMaskï¼‰
- âœ… æ”¶å…¥æ”¯å‡ºåŒå‘è¿½è¸ªï¼ˆçº¢ç»¿UIåŒºåˆ†ï¼‰
- âœ… ä»Šæ—¥/æœˆåº¦ç»Ÿè®¡é¢æ¿
- âœ… NFTé‡Œç¨‹ç¢‘åˆçº¦ï¼ˆé¦–æ¬¡è®°è´¦NFTï¼‰
- âœ… æœ¬åœ°æŒä¹…åŒ– + IPFSå¤‡ä»½

---

## 2. ç³»ç»Ÿæ¶æ„ï¼ˆå·²å®ç°ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å‰ç«¯ (Next.js 14)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ æ–‡æœ¬è¾“å…¥   â”‚  â”‚ å›¾ç‰‡ä¸Šä¼     â”‚            â”‚
â”‚  â”‚ ExpenseFormâ”‚  â”‚ ImageUpload â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                â”‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   AIè§£æç»“æœé¢„è§ˆç¡®è®¤         â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚         â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ LocalStorage + IPFSå­˜å‚¨      â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚         â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚TodayStats    â”‚MonthlyStatsâ”‚List  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚            â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚ é€šä¹‰åƒé—®   â”‚ â”‚ Pinata â”‚  â”‚ Sepolia     â”‚
â”‚ qwen-turbo â”‚ â”‚  IPFS  â”‚  â”‚ æ™ºèƒ½åˆçº¦    â”‚
â”‚ qwen-vl-maxâ”‚ â”‚(åŠ å¯†)  â”‚  â”‚ â€¢ NFTåˆçº¦   â”‚
â”‚            â”‚ â”‚        â”‚  â”‚ â€¢ ç´¢å¼•åˆçº¦  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  æ–‡æœ¬+å›¾ç‰‡     å»ä¸­å¿ƒåŒ–      é“¾ä¸Šç´¢å¼•
  AIè¯†åˆ«        æ°¸ä¹…å­˜å‚¨      CIDåˆ—è¡¨
```

---

## 3. æŠ€æœ¯æ ˆï¼ˆæç®€ç‰ˆï¼‰

```typescript
{
  "å‰ç«¯": "Next.js 14 + TypeScript",
  "UI": "Tailwind CSS",  // ä¸ç”¨shadcn/uiï¼Œç›´æ¥å†™æ ·å¼æ›´å¿«
  "é’±åŒ…": "RainbowKit",
  "AI": "é€šä¹‰åƒé—® qwen-turbo",
  "OCR": "é€šä¹‰åƒé—® qwen-vl-max",  // å¤šæ¨¡æ€æ¨¡å‹æ”¯æŒå›¾ç‰‡è¯†åˆ«
  "å­˜å‚¨": "Pinata IPFS",
  "åŠ å¯†": "CryptoJS",
  "æœ¬åœ°DB": "LocalStorage", // ä¸ç”¨IndexedDBï¼Œç®€åŒ–å¼€å‘
  "åˆçº¦": "Remix IDEç›´æ¥éƒ¨ç½²" // ä¸ç”¨Hardhatï¼Œå¿«é€Ÿéƒ¨ç½²
}
```

---

## 4. æ ¸å¿ƒåŠŸèƒ½è®¾è®¡

### 4.1 AIæ–‡æœ¬è§£æï¼ˆDemoé‡ç‚¹ï¼‰

**è¾“å…¥**ï¼šç”¨æˆ·åœ¨è¾“å…¥æ¡†è¾“å…¥"ä»Šå¤©åƒé¥­30å—"

**æµç¨‹**ï¼š
```
ç”¨æˆ·è¾“å…¥ 
â†’ å‰ç«¯å‘é€åˆ° /api/parse 
â†’ è°ƒç”¨é€šä¹‰åƒé—®API 
â†’ è¿”å›JSON: { amount: 30, category: "é¤é¥®", date: "2025-11-17" }
â†’ å‰ç«¯å±•ç¤ºç¡®è®¤ç•Œé¢
â†’ ç”¨æˆ·ç‚¹å‡»ç¡®è®¤
â†’ ä¿å­˜
```

**Promptè®¾è®¡**ï¼ˆå…³é”®ï¼‰ï¼š
```
ä½ æ˜¯è®°è´¦åŠ©æ‰‹ã€‚ä»ç”¨æˆ·è¾“å…¥æå–ï¼šé‡‘é¢ã€åˆ†ç±»ã€æ—¥æœŸã€‚

åˆ†ç±»åªèƒ½æ˜¯: é¤é¥®ã€äº¤é€šã€è´­ç‰©ã€å¨±ä¹ã€å…¶ä»–

è¾“å…¥ï¼š"ä»Šå¤©åƒé¥­30å—"
è¾“å‡ºJSON:
{
  "amount": 30,
  "category": "é¤é¥®", 
  "date": "2025-11-17",
  "description": "åƒé¥­"
}

ä¸è¦è¿”å›å…¶ä»–å†…å®¹ï¼Œåªè¿”å›JSONã€‚
```

**å®¹é”™**ï¼šå¦‚æœAIè¿”å›æ ¼å¼é”™è¯¯ï¼Œæ˜¾ç¤ºé”™è¯¯æç¤ºè®©ç”¨æˆ·é‡æ–°è¾“å…¥ã€‚

---

### 4.2 OCRå›¾ç‰‡è¯†åˆ«ï¼ˆæ–°å¢ï¼‰

**åŠŸèƒ½**ï¼šç”¨æˆ·å¯ä»¥ä¸Šä¼ å°ç¥¨ç…§ç‰‡ï¼Œç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«é‡‘é¢ã€å•†å®¶ç­‰ä¿¡æ¯ã€‚

**è¾“å…¥**ï¼šç”¨æˆ·ä¸Šä¼ å°ç¥¨/å‘ç¥¨å›¾ç‰‡

**æµç¨‹**ï¼š
```
ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡
â†’ å‰ç«¯å‹ç¼©å›¾ç‰‡ï¼ˆé™åˆ¶2MBä»¥å†…ï¼‰
â†’ è½¬æ¢ä¸ºBase64
â†’ å‘é€åˆ° /api/ocr
â†’ è°ƒç”¨é€šä¹‰åƒé—®è§†è§‰æ¨¡å‹ qwen-vl-max
â†’ è¿”å›JSON: { amount: 128.5, merchant: "æ˜Ÿå·´å…‹", category: "é¤é¥®", items: [...] }
â†’ å‰ç«¯å±•ç¤ºç¡®è®¤ç•Œé¢ï¼ˆæ”¯æŒæ‰‹åŠ¨ä¿®æ”¹ï¼‰
â†’ ç”¨æˆ·ç‚¹å‡»ç¡®è®¤
â†’ ä¿å­˜ï¼ˆåŒæ–‡æœ¬è®°è´¦æµç¨‹ï¼‰
```

**Promptè®¾è®¡**ï¼ˆå…³é”®ï¼‰ï¼š
```
ä½ æ˜¯å°ç¥¨è¯†åˆ«åŠ©æ‰‹ã€‚ä»å›¾ç‰‡ä¸­æå–ä»¥ä¸‹ä¿¡æ¯ï¼š
1. æ€»é‡‘é¢ï¼ˆå¿…é¡»ï¼‰
2. å•†å®¶åç§°
3. æ¶ˆè´¹æ—¥æœŸ
4. æ¶ˆè´¹ç±»ç›®ï¼ˆé¤é¥®ã€äº¤é€šã€è´­ç‰©ã€å¨±ä¹ã€å…¶ä»–ï¼‰
5. å…·ä½“é¡¹ç›®åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰

è¾“å‡ºJSONæ ¼å¼ï¼š
{
  "amount": 128.5,
  "merchant": "æ˜Ÿå·´å…‹",
  "date": "2025-11-17",
  "category": "é¤é¥®",
  "items": ["ç¾å¼å’–å•¡", "ä¸‰æ˜æ²»"],
  "confidence": 0.95
}

å¦‚æœæ— æ³•è¯†åˆ«ï¼Œè¿”å›ï¼š
{
  "error": "æ— æ³•è¯†åˆ«å°ç¥¨ä¿¡æ¯",
  "suggestion": "è¯·ç¡®ä¿å›¾ç‰‡æ¸…æ™°ä¸”åŒ…å«å®Œæ•´çš„å°ç¥¨ä¿¡æ¯"
}
```

**å‰ç«¯UI**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [æ‹ç…§ä¸Šä¼ ] [ç›¸å†Œé€‰æ‹©]          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚                   â”‚           â”‚
â”‚  â”‚   é¢„è§ˆå›¾ç‰‡        â”‚           â”‚
â”‚  â”‚                   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  è¯†åˆ«ä¸­... ğŸ”                    â”‚
â”‚  âœ“ è¯†åˆ«æˆåŠŸï¼                   â”‚
â”‚  é‡‘é¢: Â¥128.5                   â”‚
â”‚  å•†å®¶: æ˜Ÿå·´å…‹                   â”‚
â”‚  åˆ†ç±»: é¤é¥®                     â”‚
â”‚  [ç¡®è®¤] [é‡æ–°è¯†åˆ«]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®¹é”™å¤„ç†**ï¼š
- å›¾ç‰‡å¤§å°è¶…é™ â†’ å‰ç«¯è‡ªåŠ¨å‹ç¼©
- è¯†åˆ«å¤±è´¥ â†’ æç¤ºç”¨æˆ·æ‰‹åŠ¨è¾“å…¥æˆ–é‡æ–°æ‹ç…§
- è¯†åˆ«ç»“æœä¸å‡†ç¡® â†’ æ”¯æŒæ‰‹åŠ¨ç¼–è¾‘æ‰€æœ‰å­—æ®µ

**ä¼˜åŒ–**ï¼š
- ä¿å­˜è¯†åˆ«è¿‡çš„å›¾ç‰‡åˆ°Pinataï¼ˆå¸¦CIDå¼•ç”¨ï¼‰
- æ”¯æŒæ‰¹é‡ä¸Šä¼ å¤šå¼ å°ç¥¨
- æœ¬åœ°ç¼“å­˜OCRç»“æœï¼ˆé¿å…é‡å¤è¯†åˆ«ï¼‰

---

### 4.3 æ•°æ®å­˜å‚¨ï¼ˆç®€åŒ–ç‰ˆï¼‰

**åŠ å¯†æ–¹æ¡ˆ**ï¼š
```typescript
// 1. ç”¨æˆ·è¿æ¥é’±åŒ…åï¼Œç­¾åè·å–å¯†é’¥
const signature = await signMessage("ExpenseTracker");
const key = SHA256(signature).toString();

// 2. åŠ å¯†å•æ¡è®°è´¦
const encrypted = AES.encrypt(JSON.stringify(expense), key);

// 3. ä¸Šä¼ Pinata IPFS
const cid = await uploadToPinata(encrypted);

// 4. ä¿å­˜åˆ°LocalStorage
localStorage.setItem(`expense_${cid}`, JSON.stringify({
  cid,
  amount: expense.amount,  // æ˜æ–‡ï¼ˆç”¨äºå±•ç¤ºï¼‰
  category: expense.category,
  date: expense.date
}));

// 5. ç»´æŠ¤CIDåˆ—è¡¨
const cidList = JSON.parse(localStorage.getItem('cidList') || '[]');
cidList.push(cid);
localStorage.setItem('cidList', JSON.stringify(cidList));
```

**ä¸ºä»€ä¹ˆç”¨LocalStorageè€Œä¸æ˜¯IndexedDB**ï¼š
- Demoåªéœ€è¦å­˜å‚¨å‡ åæ¡æ•°æ®
- LocalStorageå®ç°æ›´å¿«
- ä»£ç é‡å°‘ä¸€åŠ

**æ•°æ®ç»“æ„**ï¼š
```typescript
// LocalStorageå­˜å‚¨æ ¼å¼
{
  "cidList": ["Qm123...", "Qm456..."],  // æ‰€æœ‰CID
  "expense_Qm123": {                     // æ¯æ¡è®°è´¦çš„å…ƒæ•°æ®
    "cid": "Qm123",
    "amount": 30,
    "category": "é¤é¥®",
    "date": "2025-11-17"
  }
}
```

---

### 4.4 ä¸Šé“¾ç´¢å¼•åŠŸèƒ½ï¼ˆæ–°å¢ï¼‰

**æ ¸å¿ƒç†å¿µ**ï¼š"æ•°æ®åœ¨ä¸‹ï¼Œç›®å½•åœ¨ä¸Š"
- **æ•°æ®å±‚ (Pinata IPFS)**ï¼šå­˜å®é™…è®°è´¦å†…å®¹ï¼ˆåŠ å¯†åçš„JSONï¼‰
- **ç´¢å¼•å±‚ (æ™ºèƒ½åˆçº¦)**ï¼šå­˜CIDç›®å½•ï¼ˆé’±åŒ…åœ°å€ â†’ CIDåˆ—è¡¨ï¼‰

**ç®€åŒ–åˆçº¦**ï¼š
```solidity
// ExpenseIndex.sol - è¶…ç®€ç‰ˆ
contract ExpenseIndex {
    // ç”¨æˆ·åœ°å€ => CIDæ•°ç»„
    mapping(address => string[]) public userRecords;

    event RecordAdded(address indexed user, string cid);

    // æ·»åŠ ä¸€æ¡è®°å½•
    function addRecord(string memory cid) external {
        userRecords[msg.sender].push(cid);
        emit RecordAdded(msg.sender, cid);
    }

    // è·å–æˆ‘çš„æ‰€æœ‰CID
    function getRecords(address user) external view returns (string[] memory) {
        return userRecords[user];
    }
}
```

**æ•°æ®æµç¨‹**ï¼š
```typescript
// å†™å…¥
async function saveExpense(expense) {
  // 1. åŠ å¯†æ•°æ®
  const encrypted = encrypt(expense, key);

  // 2. ä¸Šä¼ Pinataè·å¾—CID
  const cid = await uploadToPinata(encrypted);

  // 3. CIDå†™å…¥åˆçº¦ï¼ˆæ¶ˆè€—gasï¼‰
  await contract.addRecord(cid);

  // 4. æœ¬åœ°ä¿å­˜å…ƒæ•°æ®
  localStorage.setItem(cid, JSON.stringify(expense));
}

// è¯»å–ï¼ˆè·¨è®¾å¤‡æ¢å¤ï¼‰
async function restoreData(address) {
  // 1. ä»åˆçº¦è¯»å–æ‰€æœ‰CID
  const cids = await contract.getRecords(address);

  // 2. ä»Pinataä¸‹è½½æ¯ä¸ªCIDçš„å†…å®¹
  for (const cid of cids) {
    const encrypted = await fetchFromPinata(cid);
    const data = decrypt(encrypted, key);
    localStorage.setItem(cid, JSON.stringify(data));
  }
}
```

**ä¼˜åŠ¿**ï¼š
- æ¢è®¾å¤‡åªéœ€è¿é’±åŒ…ï¼Œè‡ªåŠ¨æ¢å¤æ‰€æœ‰æ•°æ®
- æ•°æ®æ°¸ä¹…ä¿å­˜ï¼ˆåŒºå—é“¾ç´¢å¼• + IPFSå­˜å‚¨ï¼‰
- å»ä¸­å¿ƒåŒ–ï¼ˆä¸ä¾èµ–ä»»ä½•ä¸­å¿ƒæœåŠ¡å™¨ï¼‰

---

### 4.5 å‰ç«¯é¡µé¢ï¼ˆå·²å®ç°ï¼‰

**å®é™…å¸ƒå±€**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header: [AI Web3è®°è´¦] [è¿æ¥é’±åŒ…æŒ‰é’®]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å…¥æ–¹å¼ï¼ˆä¸¤åˆ—å¸ƒå±€ï¼‰:                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  æ–‡æœ¬è¾“å…¥        â”‚  â”‚  å›¾ç‰‡ä¸Šä¼         â”‚    â”‚
â”‚  â”‚ "ä»Šå¤©åƒé¥­30å—"   â”‚  â”‚ [æ‹–æ‹½/é€‰æ‹©å›¾ç‰‡]  â”‚    â”‚
â”‚  â”‚ [AIè§£æ] æŒ‰é’®    â”‚  â”‚  æˆ–æ‹ç…§ä¸Šä¼       â”‚    â”‚
â”‚  â”‚                  â”‚  â”‚ ğŸ’¡ æ‹ç…§æç¤º      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  âœ“ AIè§£ææˆåŠŸï¼ˆé¢„è§ˆç¡®è®¤ç•Œé¢ï¼‰                   â”‚
â”‚  ç±»å‹: æ”¯å‡º | é‡‘é¢: Â¥30 | åˆ†ç±»: é¤é¥®            â”‚
â”‚  [ç¡®è®¤æ·»åŠ ] [é‡æ–°è¾“å…¥]                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“… ä»Šæ—¥è®°å½•:                                   â”‚
â”‚  â”Œâ”€ æ”¯å‡º (çº¢è‰²) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ [é¤é¥®] åƒé¥­  -Â¥30.00            â”‚            â”‚
â”‚  â”‚ ä»Šæ—¥æ”¯å‡ºå°è®¡: Â¥30.00            â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€ æ”¶å…¥ (ç»¿è‰²) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ [å·¥èµ„] æœˆè–ª  +Â¥5000.00          â”‚            â”‚
â”‚  â”‚ ä»Šæ—¥æ”¶å…¥å°è®¡: Â¥5000.00          â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š æœ¬æœˆç»Ÿè®¡ (2025å¹´11æœˆ):                      â”‚
â”‚  â”Œâ”€ æœ¬æœˆå‡€æ”¶å…¥: +Â¥4,970.00 â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€ æ€»æ”¶å…¥: Â¥5,000.00 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ å·¥èµ„: Â¥5,000.00                â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€ æ€»æ”¯å‡º: Â¥30.00 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ é¤é¥®: Â¥30.00                   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å·²å®ç°ç»„ä»¶**ï¼š

| ç»„ä»¶ | æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|------|
| **WalletConnect** | `WalletConnect.tsx` | RainbowKité›†æˆï¼Œæ”¯æŒMetaMaskç­‰å¤šé’±åŒ… |
| **ExpenseForm** | `ExpenseForm.tsx` | æ–‡æœ¬è¾“å…¥ + AIè§£æ + ç»“æœé¢„è§ˆç¡®è®¤ |
| **ImageUpload** | `ImageUpload.tsx` | å›¾ç‰‡æ‹–æ‹½ä¸Šä¼  + OCRè¯†åˆ« + æ‹ç…§æç¤º |
| **TodayTransactions** | `TodayTransactions.tsx` | ä»Šæ—¥æ”¯å‡º/æ”¶å…¥åˆ†ç±»å±•ç¤º + å°è®¡ |
| **MonthlyStats** | `MonthlyStats.tsx` | æœˆåº¦å‡€æ”¶å…¥ + æ”¶å…¥/æ”¯å‡ºåˆ†ç±»æ±‡æ€» |
| **ExpenseList** | `ExpenseList.tsx` | æ‰€æœ‰äº¤æ˜“åˆ—è¡¨ï¼ˆæŒ‰æ—¥æœŸå€’åºï¼‰ |

**å…³é”®UIç‰¹æ€§**ï¼š
- âœ… æ”¯å‡º/æ”¶å…¥é¢œè‰²åŒºåˆ†ï¼ˆçº¢/ç»¿ï¼‰
- âœ… å®æ—¶åŠ è½½çŠ¶æ€ï¼ˆ"AIè§£æä¸­..."ï¼‰
- âœ… ç»“æœé¢„è§ˆç¡®è®¤æœºåˆ¶
- âœ… ç§»åŠ¨ç«¯æ‘„åƒå¤´æ”¯æŒ
- âœ… æ‹–æ‹½ä¸Šä¼ å›¾ç‰‡
- âœ… é”™è¯¯æç¤ºå’Œå®¹é”™å¤„ç†

---

### 4.6 NFTé‡Œç¨‹ç¢‘ï¼ˆå±•ç¤ºWeb3ç‰¹æ€§ï¼‰

**æç®€è®¾è®¡**ï¼šåªåšä¸€ä¸ªé‡Œç¨‹ç¢‘ - "é¦–æ¬¡è®°è´¦NFT"

**åˆçº¦**ï¼ˆSolidityï¼‰ï¼š
```solidity
// è¶…ç®€å•ç‰ˆæœ¬
contract FirstExpenseNFT is ERC721 {
    uint256 public tokenCounter;
    mapping(address => bool) public hasMinted;
    
    constructor() ERC721("First Expense", "FE") {}
    
    function mintFirstExpense() external {
        require(!hasMinted[msg.sender], "Already minted");
        _safeMint(msg.sender, tokenCounter);
        hasMinted[msg.sender] = true;
        tokenCounter++;
    }
}
```

**å‰ç«¯é›†æˆ**ï¼š
```typescript
// ç”¨æˆ·ç¬¬ä¸€æ¬¡è®°è´¦æˆåŠŸå
if (expenseCount === 1) {
  await contract.mintFirstExpense();
  alert("æ­å–œè·å¾—é¦–æ¬¡è®°è´¦NFTï¼");
}
```

**éƒ¨ç½²**ï¼š
- ç”¨Remix IDEç›´æ¥éƒ¨ç½²åˆ°Sepolia
- ä¸éœ€è¦å…ƒæ•°æ®URIï¼ˆDemoå¯çœç•¥ï¼‰
- å‰ç«¯åªéœ€è¦åˆçº¦åœ°å€å’ŒABI

---

## 5. æ•°æ®æµ

### 5.1 è®°è´¦æµç¨‹ï¼ˆæ–‡æœ¬/OCRï¼‰
```
æ–‡æœ¬è®°è´¦:
1. ç”¨æˆ·è¾“å…¥æ–‡æœ¬ â†’ AIè§£æ (1-2ç§’)
2. æ˜¾ç¤ºè§£æç»“æœä¾›ç¡®è®¤ â†’ ç”¨æˆ·ç‚¹ç¡®è®¤

OCRè®°è´¦:
1. ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ â†’ AIè¯†åˆ« (2-3ç§’)
2. æ˜¾ç¤ºè¯†åˆ«ç»“æœä¾›ç¡®è®¤ â†’ ç”¨æˆ·ç‚¹ç¡®è®¤

å…±åŒæµç¨‹:
3. åŠ å¯†æ•°æ® (ç¬é—´)
4. ä¸Šä¼ Pinata (3-5ç§’) â†’ è·å¾—CID
5. CIDå†™å…¥åˆçº¦ (5-10ç§’)
6. ä¿å­˜åˆ°LocalStorage
7. æ£€æŸ¥æ˜¯å¦æ˜¯ç¬¬ä¸€ç¬” â†’ é“¸é€ NFT
8. åˆ·æ–°åˆ—è¡¨æ˜¾ç¤º
```

### 5.2 æ•°æ®è¯»å–ä¸æ¢å¤
```
æœ¬åœ°è¯»å–ï¼ˆåŒè®¾å¤‡ï¼‰:
1. ç”¨æˆ·è¿æ¥é’±åŒ…
2. ä»LocalStorageè¯»å–CIDåˆ—è¡¨
3. æ˜¾ç¤ºå…ƒæ•°æ®ï¼ˆé‡‘é¢ã€åˆ†ç±»ã€æ—¥æœŸï¼‰

è·¨è®¾å¤‡æ¢å¤ï¼ˆæ–°è®¾å¤‡ï¼‰:
1. ç”¨æˆ·è¿æ¥é’±åŒ…
2. æ£€æµ‹LocalStorageä¸ºç©º
3. ä»åˆçº¦è¯»å–è¯¥åœ°å€çš„æ‰€æœ‰CID
4. æç¤ºï¼š"å‘ç°Xæ¡å†å²è®°è´¦ï¼Œæ˜¯å¦æ¢å¤ï¼Ÿ"
5. ç”¨æˆ·ç¡®è®¤ â†’ ä»Pinataæ‰¹é‡ä¸‹è½½
6. é’±åŒ…ç­¾åè§£å¯†
7. ä¿å­˜åˆ°LocalStorage â†’ æ˜¾ç¤ºå®Œæ•´åˆ—è¡¨
```

---

## 6. APIè®¾è®¡

### 6.1 AIæ–‡æœ¬è§£æ
```typescript
// /api/parse
POST /api/parse
Body: { text: "ä»Šå¤©åƒé¥­30å—" }

Response: {
  success: true,
  data: {
    amount: 30,
    category: "é¤é¥®",
    date: "2025-11-17",
    description: "åƒé¥­"
  }
}
```

### 6.2 OCRå›¾ç‰‡è¯†åˆ«ï¼ˆæ–°å¢ï¼‰
```typescript
// /api/ocr
POST /api/ocr
Body: { image: "base64_string" }

Response: {
  success: true,
  data: {
    amount: 128.5,
    merchant: "æ˜Ÿå·´å…‹",
    category: "é¤é¥®",
    date: "2025-11-17",
    items: ["ç¾å¼å’–å•¡", "ä¸‰æ˜æ²»"],
    confidence: 0.95
  }
}
```

### 6.3 Pinataä¸Šä¼ 
```typescript
// /api/pinata-upload
POST /api/pinata-upload
Body: { data: "encrypted_string" }

Response: {
  cid: "QmXxx...",
  pinataUrl: "https://gateway.pinata.cloud/ipfs/QmXxx..."
}
```

---

## 7. æ ¸å¿ƒä»£ç ç»“æ„

```
/app
  /api
    /parse           # AIæ–‡æœ¬è§£æ
    /ocr             # OCRå›¾ç‰‡è¯†åˆ«ï¼ˆæ–°å¢ï¼‰
    /pinata-upload   # Pinataä¸Šä¼ 
  /components
    WalletConnect    # é’±åŒ…è¿æ¥
    ExpenseForm      # æ–‡æœ¬è¾“å…¥è¡¨å•
    ImageUpload      # å›¾ç‰‡ä¸Šä¼ ç»„ä»¶ï¼ˆæ–°å¢ï¼‰
    ExpenseList      # è®°å½•åˆ—è¡¨
    MonthStats       # æœˆåº¦ç»Ÿè®¡
    DataRestore      # æ•°æ®æ¢å¤ç»„ä»¶ï¼ˆæ–°å¢ï¼‰
  /utils
    crypto.ts        # åŠ å¯†å·¥å…·
    pinata.ts        # Pinata IPFSå·¥å…·
    contract.ts      # åˆçº¦äº¤äº’ï¼ˆæ–°å¢ï¼‰
  page.tsx           # ä¸»é¡µé¢

/contracts
  FirstExpenseNFT.sol  # NFTåˆçº¦
  ExpenseIndex.sol     # é“¾ä¸Šç´¢å¼•åˆçº¦ï¼ˆæ–°å¢ï¼‰

/lib
  constants.ts      # é…ç½®å¸¸é‡ï¼ˆåˆçº¦åœ°å€ã€API Keyï¼‰
  abi.ts            # åˆçº¦ABIï¼ˆæ–°å¢ï¼‰
```

---
